$(document).ready(function(){
   'use strict';

   var element = document.getElementById('flash');
   var baddie = document.createElement('div');
   baddie.className = 'baddie';
   var baddiePos = {left:0,top:0};
   element.appendChild(baddie);

   var gameArea = [
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,15,15,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,15,15,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
   11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11
   ];

   var obstacles =  [
   13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,
   13,10,10,10,10,10,14,10,10,10,10,10,10,10,10,14,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,14,10,10,10,10,10,10,10,10,14,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,14,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,14,14,14,10,10,14,10,10,10,10,10,10,10,13,
   13,14,14,14,14,14,14,10,10,10,10,16,14,10,10,14,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,14,10,10,10,10,10,14,10,10,14,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,14,10,10,10,14,14,14,10,10,14,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,
   13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13
   ];

   function draw(gameArea, obstacles){
   	for(var i=0; i<gameArea.length; i++){
   		var tileElement = document.createElement('div');
   		tileElement.innerHTML = '';
   		tileElement.className = 'tile t'+gameArea[i]+(obstacles[i] !== 10 ? ' obstacle o'+obstacles[i] : '');
   		element.appendChild(tileElement);
   	}
   }

   draw(gameArea,obstacles);

   function move(moveLeft, moveTop, direction){
   	function placeBaddie(){
   		baddie.style.left = (-15+baddiePos.left*32+32/2)+'px';
   		baddie.style.top = (-15+baddiePos.top*32+32/2)+'px';
   	}

   	baddie.className = 'baddie '+direction;



   	if(!(obstacles[(baddiePos.left+moveLeft)+(baddiePos.top+moveTop)*24]-10)){
   		console.log('Moving '+direction+'.');
   		baddiePos.left += moveLeft;
	   	baddiePos.top += moveTop;
	   	placeBaddie();
   	}else{
   		console.log('Hitting an obstacle.')
   	}



   }

   move(1, 1, 'down');


   document.onkeydown = function(event){
   	var key;

   	key = event.keyCode;

   	switch(key){
   		case 37: 
   			move(-1,0,'left');
   			break;
   		case 39:
   			move(1,0,'right');
   			break;
   		case 38:
   			move(0,-1,'up');
   			break;
   		case 40:
   			move(0,1,'down');

   	}

   };


});